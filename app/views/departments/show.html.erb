<h1><%= @department.name %></h1>
<p><%= @department.description %></p>

<h2>Reports</h2>
<% if @department.reports.any? %>
  <% @department.reports.each do |report| %>
    <div class="report">
      <p>Uploaded at: <%= report.uploaded_at || report.created_at.strftime("%d.%m.%Y %H:%M") %></p>
      <p>Comments: <%= report.comments %></p>
      
      <% if report.pdf.attached? %>
        <div class="pdf-viewer">
          <iframe src="<%= url_for(report.pdf) %>" width="100%" height="600px"></iframe>
        </div>
        <p>
          <%= link_to "Open PDF in new tab", rails_blob_path(report.pdf, disposition: "inline"), target: "_blank", class: "btn btn-primary" %>
        </p>
      <% else %>
        <p>No PDF attached</p>
      <% end %>
    </div>
  <% end %>
<% else %>
  <p>No reports uploaded yet.</p>
<% end %>

<% if user_signed_in? %>
  <%= link_to "Upload New Report", new_department_report_path(@department), class: "btn btn-success" %>
<% end %>

<%= link_to 'Back', departments_path %>
